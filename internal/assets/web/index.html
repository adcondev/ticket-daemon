<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Daemon - Test Client</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: #1a1a2e;
            color: #eee;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            color: #00d4ff;
            margin-bottom: 20px;
        }

        .status-bar {
            display: flex;
            gap: 20px;
            background: #16213e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff4444;
        }

        .status-dot.connected {
            background: #44ff44;
        }

        .panel {
            background: #16213e;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .panel h2 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        textarea {
            width: 100%;
            height: 200px;
            background: #0f0f23;
            border: 1px solid #333;
            color: #fff;
            font-family: 'Consolas', monospace;
            padding: 10px;
            border-radius: 4px;
            resize: vertical;
        }

        button {
            background: #00d4ff;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
            margin-top: 10px;
        }

        button:hover {
            background: #00a0cc;
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
        }

        button.secondary {
            background: #444;
            color: #fff;
        }

        button.secondary:hover {
            background: #555;
        }

        .log {
            background: #0f0f23;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Consolas', monospace;
            font-size: 13px;
        }

        .log-entry {
            margin-bottom: 5px;
            border-bottom: 1px solid #222;
            padding-bottom: 5px;
        }

        .log-time {
            color: #666;
        }

        .log-type {
            font-weight: bold;
        }

        .log-type.info {
            color: #00d4ff;
        }

        .log-type.ack {
            color: #44ff44;
        }

        .log-type.result {
            color: #ffff44;
        }

        .log-type.error {
            color: #ff4444;
        }

        .log-type.sent {
            color: #ff44ff;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üé´ Ticket Daemon - Test Client</h1>

    <div class="status-bar">
        <div class="status-item">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Desconectado</span>
        </div>
        <div class="status-item">
            <span>Cola: <strong id="queueStatus">-/-</strong></span>
        </div>
        <div class="status-item">
            <span>Clientes: <strong id="clientCount">-</strong></span>
        </div>
    </div>

    <div class="panel">
        <h2>üìÑ Documento JSON (Formato Poster)</h2>
        <textarea id="jsonInput">{
  "version": "1.0",
  "profile": {
    "model": "58mm PT-210",
    "paper_width": 58,
    "dpi": 203,
    "has_qr": true
  },
  "commands": [
    {
      "type": "raw",
      "data": {
        "hex": "1B 40",
        "comment": "Inicializar impresora"
      }
    },
    {
      "type": "pulse",
      "data": { "pin": 0 }
    },
    {
      "type": "beep",
      "data": { "times": 1, "lapse": 1 }
    },
    {
      "type": "image",
      "data": {
        "code": "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",
        "align": "center",
        "pixel_width": 200
      }
    },
    {
      "type": "text",
      "data": {
        "content": {
          "text": "KEMPER URGATE",
          "content_style": { "align": "center", "bold": true, "size": "2x2" }
        },
        "new_line": true
      }
    },
    {
      "type": "text",
      "data": {
        "content": { "text": "RFC: EKU9003173C9", "align": "center" },
        "new_line": true
      }
    },
    {
      "type": "separator",
      "data": { "char": "-", "length": 32 }
    },
    {
      "type": "text",
      "data": {
        "label": { "text": "Folio", "label_style": { "bold": true } },
        "content": { "text": "0002" }
      }
    },
    {
      "type": "text",
      "data": {
        "label": { "text": "Fecha", "label_style": { "bold": true } },
        "content": { "text": "2025-11-19 14:53" }
      }
    },
    {
      "type": "separator",
      "data": { "char": ".", "length": 32 }
    },
    {
      "type": "table",
      "data": {
        "definition": {
          "columns": [
            { "name": "Cant", "width": 4, "align": "left" },
            { "name": "Producto", "width": 16, "align": "center" },
            { "name": "Total", "width": 10, "align": "right" }
          ]
        },
        "rows": [
          ["1.0", "MALETIN", "$1,060.00"]
        ],
        "options": { "header_bold": true, "column_spacing": 1 }
      }
    },
    {
      "type": "separator",
      "data": { "char": "-", "length": 32 }
    },
    {
      "type": "text",
      "data": {
        "content": {
          "text": "TOTAL: $1,060.00 MXN",
          "align": "right",
          "content_style": { "bold": true }
        }
      }
    },
    {
      "type": "feed",
      "data": { "lines": 1 }
    },
    {
      "type": "barcode",
      "data": {
        "symbology": "code128",
        "data": "20250109",
        "height": 50,
        "hri_position": "below",
        "align": "center"
      }
    },
    {
      "type": "feed",
      "data": { "lines": 1 }
    },
    {
      "type": "qr",
      "data": {
        "data": "https://factura.ejemplo.com/verify?folio=2",
        "human_text": "Escanea para Factura",
        "pixel_width": 150,
        "align": "center"
      }
    },
    {
      "type": "feed",
      "data": { "lines": 1 }
    },
    {
      "type": "text",
      "data": {
        "content": {
          "text": "GRACIAS POR SU COMPRA",
          "align": "center",
          "content_style": { "bold": true, "inverse": true }
        }
      }
    },
    {
      "type": "feed",
      "data": { "lines": 1 }
    },
    {
      "type": "cut",
      "data": { "mode": "partial", "feed": 0 }
    }
  ]
}</textarea>
        <button id="btnSend">üì§ Enviar Ticket</button>
        <button id="btnStatus" class="secondary">üìä Estado Cola</button>
        <button id="btnPing" class="secondary">üèì Ping</button>
        <button id="btnClear" class="secondary">üóëÔ∏è Limpiar Log</button>
    </div>

    <div class="panel">
        <h2>üìã Log de Mensajes</h2>
        <div class="log" id="logContainer"></div>
    </div>
</div>

<script>
    const wsUrl = `ws://${window.location.hostname}:8766/ws`;
    let socket = null;
    let isConnected = false;

    function updateStatus(connected) {
        isConnected = connected;
        document.getElementById('statusDot').classList.toggle('connected', connected);
        document.getElementById('statusText').textContent = connected ? 'Conectado' : 'Desconectado';
        document.getElementById('btnSend').disabled = !connected;
    }

    function addLog(type, message) {
        const container = document.getElementById('logContainer');
        const time = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<span class="log-time">[${time}]</span> <span class="log-type ${type}">${type.toUpperCase()}</span>:  ${escapeHtml(message)}`;
        container.appendChild(entry);
        container.scrollTop = container.scrollHeight;
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function connect() {
        socket = new WebSocket(wsUrl);

        socket.onopen = () => {
            updateStatus(true);
            addLog('info', 'Conexi√≥n establecida');
        };

        socket.onmessage = (event) => {
            try {
                const data = JSON.parse(event.data);
                addLog(data.tipo || 'message', JSON.stringify(data));

                if (data.position !== undefined) {
                    document.getElementById('queueStatus').textContent = data.position + '/100';
                }
            } catch (e) {
                addLog('message', event.data);
            }
        };

        socket.onclose = () => {
            updateStatus(false);
            addLog('info', 'Conexi√≥n cerrada, reconectando...');
            setTimeout(connect, 3000);
        };

        socket.onerror = (err) => {
            addLog('error', 'Error de conexi√≥n');
        };
    }

    document.getElementById('btnSend').addEventListener('click', () => {
        if (!socket || !isConnected) return;

        try {
            const jsonData = JSON.parse(document.getElementById('jsonInput').value);
            const message = {
                tipo: 'ticket',
                id: 'test-' + Date.now(),
                datos: jsonData
            };
            socket.send(JSON.stringify(message));
            addLog('sent', 'Ticket enviado:  ' + message.id);
        } catch (e) {
            addLog('error', 'JSON inv√°lido:  ' + e.message);
        }
    });

    document.getElementById('btnStatus').addEventListener('click', () => {
        if (!socket || !isConnected) return;
        socket.send(JSON.stringify({tipo: 'status'}));
        addLog('sent', 'Solicitud de estado');
    });

    document.getElementById('btnPing').addEventListener('click', () => {
        if (!socket || !isConnected) return;
        socket.send(JSON.stringify({tipo: 'ping', id: 'ping-' + Date.now()}));
        addLog('sent', 'Ping enviado');
    });

    document.getElementById('btnClear').addEventListener('click', () => {
        document.getElementById('logContainer').innerHTML = '';
    });

    connect();
</script>
</body>
</html>